import{r as x,j as t}from"./index-CRqe24Pj.js";import{B as Y}from"./BackButton-DJX8SMkP.js";function $(){const R=x.useRef(null),A=x.useRef(null),[L,v]=x.useState({player1:0,player2:0}),[G,j]=x.useState(0),[d,b]=x.useState(null),[k,U]=x.useState(2);x.useEffect(()=>{if(!d)return;const f=R.current,e=f.getContext("2d"),o=800,i=500;f.width=o,f.height=i;const h={ArrowUp:!1,ArrowDown:!1,w:!1,s:!1};let B,P=0,N=0,S=0;const H=d==="ai",K=k,C=8,s={w:12,h:90};let c=i/2-s.h/2,a=i/2-s.h/2,r=o/2,n=i/2,m=-C,w=-3,g=!1,p=[];function M(l){r=o/2,n=i/2,m=l?-C:C,w=Math.random()*5-2.5,S=0,j(0),p=[]}function E(l){g||(g=!0,l==="p1"?P++:N++,v({player1:P,player2:N}),m=0,w=0,setTimeout(()=>{M(l==="p1"),g=!1},700))}function q(){if(h.w&&(c-=9),h.s&&(c+=9),c=Math.max(0,Math.min(i-s.h,c)),H){const u=3+K*1.5,y=a+s.h/2;y<n-10?a+=u:y>n+10&&(a-=u)}else h.ArrowUp&&(a-=9),h.ArrowDown&&(a+=9);a=Math.max(0,Math.min(i-s.h,a)),p.unshift({x:r,y:n}),p.length>12&&p.pop(),r+=m,n+=w,n<=6&&(n=6,w*=-1),n>=i-6&&(n=i-6,w*=-1),r<=s.w+10&&r>6&&n>=c&&n<=c+s.h&&(r=s.w+10,m=Math.abs(m)+.4,w=(n-c-s.h/2)/(s.h/2)*7,S++,j(S)),r>=o-s.w-10&&r<o-6&&n>=a&&n<=a+s.h&&(r=o-s.w-10,m=-(Math.abs(m)+.4),w=(n-a-s.h/2)/(s.h/2)*7,S++,j(S)),!g&&r<0&&E("p2"),!g&&r>o&&E("p1")}function z(){e.fillStyle="#0a0e1a",e.fillRect(0,0,o,i),e.setLineDash([8,8]),e.strokeStyle="rgba(0,229,255,0.2)",e.lineWidth=2,e.beginPath(),e.moveTo(o/2,0),e.lineTo(o/2,i),e.stroke(),e.setLineDash([]);for(let y=0;y<p.length;y++){const T=p[y],O=.3*(1-y/p.length),V=6*(1-y/p.length*.5);e.beginPath(),e.arc(T.x,T.y,V,0,Math.PI*2),e.fillStyle=`rgba(0, 229, 255, ${O})`,e.fill()}e.beginPath(),e.arc(r,n,8,0,Math.PI*2),e.fillStyle="#fff",e.fill(),e.shadowColor="#00e5ff",e.shadowBlur=20,e.fill(),e.shadowBlur=0,e.shadowColor="#00e5ff",e.shadowBlur=15;const l=e.createLinearGradient(0,c,0,c+s.h);l.addColorStop(0,"#00e5ff"),l.addColorStop(1,"#0088aa"),e.fillStyle=l,e.fillRect(6,c,s.w,s.h),e.shadowColor="#ff5252",e.shadowBlur=15;const u=e.createLinearGradient(0,a,0,a+s.h);u.addColorStop(0,"#ff5252"),u.addColorStop(1,"#cc0000"),e.fillStyle=u,e.fillRect(o-s.w-6,a,s.w,s.h),e.shadowBlur=0,e.strokeStyle="rgba(0,229,255,0.15)",e.lineWidth=2,e.strokeRect(1,1,o-2,i-2)}function D(){g||q(),z(),B=requestAnimationFrame(D)}const I=l=>{l.key in h&&(h[l.key]=!0,l.preventDefault())},W=l=>{l.key in h&&(h[l.key]=!1)};return window.addEventListener("keydown",I),window.addEventListener("keyup",W),M(!0),D(),A.current={reset:()=>{P=0,N=0,v({player1:0,player2:0}),M(!0)}},()=>{cancelAnimationFrame(B),window.removeEventListener("keydown",I),window.removeEventListener("keyup",W)}},[d,k]);const F=()=>{b(null),v({player1:0,player2:0}),j(0)};return d?t.jsxs("div",{className:"pong-root",children:[t.jsxs("div",{className:"pong-hud",children:[t.jsxs("div",{className:"pong-score cyan",children:[d==="ai"?"You":"P1",": ",L.player1]}),t.jsxs("div",{className:"pong-rally",children:["Rally: ",G]}),t.jsxs("div",{className:"pong-score red",children:[d==="ai"?"AI":"P2",": ",L.player2]})]}),t.jsx("canvas",{ref:R,className:"pong-canvas"}),t.jsxs("div",{className:"pong-controls",children:[t.jsx("span",{className:"pong-keys",children:d==="2p"?"P1: W / S":"W / S"}),t.jsx("button",{onClick:()=>{var f;return(f=A.current)==null?void 0:f.reset()},children:"Reset"}),t.jsx("button",{onClick:F,children:"Menu"}),d==="2p"&&t.jsx("span",{className:"pong-keys",children:"P2: ↑ / ↓"})]}),t.jsx(Y,{})]}):t.jsxs("div",{className:"pong-root",children:[t.jsxs("div",{className:"pong-menu",children:[t.jsx("h1",{className:"pong-title",children:"PONG"}),t.jsx("button",{className:"pong-menu-btn cyan",onClick:()=>b("2p"),children:"2 Player"}),t.jsx("button",{className:"pong-menu-btn red",onClick:()=>b("ai"),children:"VS AI"}),t.jsxs("div",{className:"pong-diff-row",children:[t.jsx("label",{children:"AI Difficulty:"}),t.jsxs("select",{value:k,onChange:f=>U(Number(f.target.value)),children:[t.jsx("option",{value:1,children:"Easy"}),t.jsx("option",{value:2,children:"Medium"}),t.jsx("option",{value:3,children:"Hard"})]})]})]}),t.jsx(Y,{})]})}export{$ as default};
