import{r as t,j as e}from"./index-CRqe24Pj.js";import{B as F}from"./BackButton-DJX8SMkP.js";const G=["ðŸ¶","ðŸ±","ðŸ­","ðŸ¹","ðŸ°","ðŸ¦Š","ðŸ»","ðŸ¼","ðŸ¨","ðŸ¦","ðŸ¯","ðŸ®","ðŸ·","ðŸ¸","ðŸµ","ðŸ§","ðŸ¦","ðŸ¦‹"];function z(a){const r=[...a];for(let c=r.length-1;c>0;c--){const l=Math.floor(Math.random()*(c+1));[r[c],r[l]]=[r[l],r[c]]}return r}function J(a){const r=z(G).slice(0,a);return z([...r,...r].map((c,l)=>({id:l,emoji:c,flipped:!1,matched:!1})))}const m=[{label:"4Ã—3",pairs:6,cols:4},{label:"4Ã—4",pairs:8,cols:4},{label:"5Ã—4",pairs:10,cols:5},{label:"6Ã—5",pairs:15,cols:6}];function q(){const[a,r]=t.useState(1),[c,l]=t.useState(()=>J(m[1].pairs)),[O,v]=t.useState([]),[S,M]=t.useState(0),[I,g]=t.useState(0),[k,y]=t.useState(0),[P,C]=t.useState(!1),[w,B]=t.useState(!1),[u,W]=t.useState(()=>{try{return JSON.parse(localStorage.getItem("mm_best")||"{}")}catch{return{}}}),n=t.useRef(null),f=t.useRef(!1),E=m[a].pairs,_=t.useCallback(()=>{n.current&&clearInterval(n.current),n.current=setInterval(()=>y(s=>s+1),1e3)},[]),R=t.useCallback(s=>{l(J(m[s??a].pairs)),v([]),M(0),g(0),y(0),C(!1),B(!1),f.current=!1,n.current&&clearInterval(n.current)},[a]);t.useEffect(()=>()=>{n.current&&clearInterval(n.current)},[]);const A=s=>{if(f.current||w)return;const i=c[s];if(i.flipped||i.matched)return;P||(C(!0),_());const b=c.map((d,h)=>h===s?{...d,flipped:!0}:d),N=[...O,s];if(l(b),v(N),N.length===2){M(p=>p+1),f.current=!0;const[d,h]=N;if(b[d].emoji===b[h].emoji){const p=b.map((o,x)=>x===d||x===h?{...o,matched:!0}:o);l(p),v([]),f.current=!1;const j=I+1;if(g(j),j===E){B(!0),n.current&&clearInterval(n.current);const o=m[a].label,x=S+1;if(!u[o]||x<u[o]){const $={...u,[o]:x};W($);try{localStorage.setItem("mm_best",JSON.stringify($))}catch{}}}}else setTimeout(()=>{l(p=>p.map((j,o)=>o===d||o===h?{...j,flipped:!1}:j)),v([]),f.current=!1},800)}},T=s=>`${Math.floor(s/60)}:${(s%60).toString().padStart(2,"0")}`;return e.jsxs("div",{className:"mm-root",children:[e.jsx("h1",{children:"Memory Match"}),e.jsxs("div",{className:"mm-top",children:[e.jsx("div",{className:"mm-sizes",children:m.map((s,i)=>e.jsx("button",{className:i===a?"active":"",onClick:()=>{r(i),R(i)},children:s.label},s.label))}),e.jsxs("div",{className:"mm-stats",children:[e.jsxs("span",{children:["Moves: ",e.jsx("b",{children:S})]}),e.jsxs("span",{children:["â± ",T(k)]}),e.jsxs("span",{children:["Matched: ",e.jsxs("b",{children:[I,"/",E]})]})]})]}),e.jsx("div",{className:"mm-grid",style:{gridTemplateColumns:`repeat(${m[a].cols}, 72px)`},children:c.map((s,i)=>e.jsx("div",{className:`mm-card ${s.flipped||s.matched?"flip":""} ${s.matched?"matched":""}`,onClick:()=>A(i),children:e.jsxs("div",{className:"mm-inner",children:[e.jsx("div",{className:"mm-front",children:"?"}),e.jsx("div",{className:"mm-back",children:s.emoji})]})},s.id))}),u[m[a].label]&&e.jsxs("div",{className:"mm-best",children:["Best (",m[a].label,"): ",u[m[a].label]," moves"]}),w&&e.jsx("div",{className:"mm-win-overlay",children:e.jsxs("div",{className:"mm-win",children:[e.jsx("h2",{children:"ðŸŽ‰ You Win!"}),e.jsxs("p",{children:[S," moves in ",T(k)]}),e.jsx("button",{onClick:()=>R(),children:"Play Again"})]})}),e.jsx(F,{})]})}export{q as default};
