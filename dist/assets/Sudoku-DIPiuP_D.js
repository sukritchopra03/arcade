import{r as i,R as T,j as l}from"./index-DxoVmnoF.js";import{B as D}from"./BackButton-rhTEpRQT.js";function F(S){const $=Array.from({length:9},()=>Array(9).fill(0));function E(n,e,a,p){for(let u=0;u<9;u++)if(n[e][u]===p||n[u][a]===p)return!1;const d=Math.floor(e/3)*3,x=Math.floor(a/3)*3;for(let u=d;u<d+3;u++)for(let v=x;v<x+3;v++)if(n[u][v]===p)return!1;return!0}function z(n){for(let e=0;e<9;e++)for(let a=0;a<9;a++)if(n[e][a]===0){const p=[1,2,3,4,5,6,7,8,9].sort(()=>Math.random()-.5);for(const d of p)if(E(n,e,a,d)){if(n[e][a]=d,z(n))return!0;n[e][a]=0}return!1}return!0}z($);const N=$.map(n=>[...n]),y=$.map(n=>[...n]),h=S==="easy"?35:S==="medium"?45:55;let w=0;const k=[];for(let n=0;n<9;n++)for(let e=0;e<9;e++)k.push([n,e]);k.sort(()=>Math.random()-.5);for(const[n,e]of k){if(w>=h)break;y[n][e]=0,w++}return{puzzle:y,solution:N}}function U(){const[S,$]=i.useState("medium"),[E,z]=i.useState(null),[N,y]=i.useState(null),[h,w]=i.useState(null),[k,n]=i.useState(null),[e,a]=i.useState(null),[p,d]=i.useState(new Set),[x,u]=i.useState(!1),[v,M]=i.useState(0),j=T.useRef(null),C=i.useCallback(t=>{const s=t||S,{puzzle:o,solution:r}=F(s);z(o),y(r),w(o.map(f=>[...f])),n(o.map(f=>f.map(c=>c!==0))),a(null),d(new Set),u(!1),M(0),j.current&&clearInterval(j.current),j.current=setInterval(()=>M(f=>f+1),1e3)},[S]);i.useEffect(()=>{C()},[]),i.useEffect(()=>()=>{j.current&&clearInterval(j.current)},[]);const R=(t,s)=>{for(let o=0;o<9;o++)for(let r=0;r<9;r++)if(t[o][r]!==s[o][r])return!1;return!0},I=(t,s)=>{x||a([t,s])},g=t=>{if(!e||x)return;const[s,o]=e;if(k[s][o])return;const r=h.map(c=>[...c]);r[s][o]=t,w(r);const f=new Set;for(let c=0;c<9;c++)for(let m=0;m<9;m++)r[c][m]!==0&&r[c][m]!==N[c][m]&&f.add(`${c}-${m}`);d(f),t!==0&&R(r,N)&&(u(!0),j.current&&clearInterval(j.current))};i.useEffect(()=>{if(!h)return;const t=s=>{if(x)return;const o=parseInt(s.key);o>=1&&o<=9&&g(o),(s.key==="Backspace"||s.key==="Delete"||s.key==="0")&&g(0)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)});const b=t=>`${Math.floor(t/60)}:${(t%60).toString().padStart(2,"0")}`;return h?l.jsxs("div",{className:"su-root",children:[l.jsx("h1",{children:"Sudoku"}),l.jsxs("div",{className:"su-top",children:[l.jsx("div",{className:"su-diffs",children:["easy","medium","hard"].map(t=>l.jsx("button",{className:t===S?"active":"",onClick:()=>{$(t),C(t)},children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),l.jsxs("span",{className:"su-timer",children:["â± ",b(v)]})]}),l.jsx("div",{className:"su-grid",children:h.map((t,s)=>t.map((o,r)=>{const f=k[s][r],c=e&&e[0]===s&&e[1]===r,m=e&&(e[0]===s||e[1]===r||Math.floor(e[0]/3)===Math.floor(s/3)&&Math.floor(e[1]/3)===Math.floor(r/3)),B=e&&o!==0&&h[e[0]][e[1]]===o,A=p.has(`${s}-${r}`),L=(r+1)%3===0&&r<8?"br":"",P=(s+1)%3===0&&s<8?"bb":"";return l.jsx("div",{className:`su-cell ${f?"fixed":""} ${c?"sel":""} ${m?"hl":""} ${B?"same":""} ${A?"err":""} ${L} ${P}`,onClick:()=>I(s,r),children:o>0?o:""},`${s}-${r}`)}))}),l.jsxs("div",{className:"su-numpad",children:[[1,2,3,4,5,6,7,8,9].map(t=>l.jsx("button",{onClick:()=>g(t),children:t},t)),l.jsx("button",{onClick:()=>g(0),children:"âŒ«"})]}),x&&l.jsxs("div",{className:"su-win",children:[l.jsx("h2",{children:"ðŸŽ‰ Solved!"}),l.jsxs("p",{children:["Time: ",b(v)]}),l.jsx("button",{onClick:()=>C(),children:"New Puzzle"})]}),l.jsx(D,{})]}):l.jsx("div",{className:"su-loading",children:"Loadingâ€¦"})}export{U as default};
