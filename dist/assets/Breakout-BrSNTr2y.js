import{r as v,j as i}from"./index-DxoVmnoF.js";import{B as U}from"./BackButton-rhTEpRQT.js";function Z(){const R=v.useRef(null),[b,M]=v.useState("menu"),[A,N]=v.useState(0),[K,T]=v.useState(3),[z,H]=v.useState(1),I=v.useRef({});return v.useEffect(()=>{const f=R.current,t=f.getContext("2d");let l,a;function S(){l=f.width=window.innerWidth,a=f.height=window.innerHeight}S(),window.addEventListener("resize",S);let W;const O=14,j=120;let o={x:0,w:j,h:O},h=[],d=[],k=0,c=1,g=3,w=!1,m=!1,x=[],u=[];const F=["#ff5252","#ffd740","#4caf50","#00e5ff","#ce93d8","#ff9800"];function G(){d=[];const n=Math.min(12,6+c),e=Math.min(8,3+c),r=Math.min(80,(l-40)/n-4),s=22,y=(l-n*(r+4))/2;for(let p=0;p<e;p++)for(let C=0;C<n;C++)d.push({x:y+C*(r+4),y:50+p*(s+4),w:r,h:s,color:F[p%F.length],hits:p<2&&c>2?2:1})}function E(){h=[{x:l/2,y:a-80,vx:(Math.random()<.5?3:-3)+c*.3,vy:-(4+c*.3),r:8}]}function L(){o.x=l/2-o.w/2,o.w=j,k=0,c=1,g=3,x=[],u=[],G(),E(),N(0),T(3),H(1)}function B(n,e,r,s=5){for(let y=0;y<s;y++)u.push({x:n,y:e,vx:(Math.random()-.5)*5,vy:(Math.random()-.5)*5,life:1,color:r})}function J(){for(let n=h.length-1;n>=0;n--){const e=h[n];if(e.x+=e.vx,e.y+=e.vy,e.x-e.r<0&&(e.x=e.r,e.vx=Math.abs(e.vx)),e.x+e.r>l&&(e.x=l-e.r,e.vx=-Math.abs(e.vx)),e.y-e.r<0&&(e.y=e.r,e.vy=Math.abs(e.vy)),e.vy>0&&e.y+e.r>=a-40-o.h&&e.x>o.x&&e.x<o.x+o.w){e.vy=-Math.abs(e.vy);const r=(e.x-(o.x+o.w/2))/(o.w/2);e.vx=r*5,B(e.x,e.y,"#00e5ff",3)}if(e.y>a){if(h.splice(n,1),h.length===0){if(g--,T(g),g<=0){m=!0,w=!1,M("over");return}E()}continue}for(let r=d.length-1;r>=0;r--){const s=d[r];if(e.x+e.r>s.x&&e.x-e.r<s.x+s.w&&e.y+e.r>s.y&&e.y-e.r<s.y+s.h){if(s.hits--,s.hits<=0){if(B(s.x+s.w/2,s.y+s.h/2,s.color,8),Math.random()<.15){const y=Math.random()<.5?"multi":"wide";x.push({x:s.x+s.w/2,y:s.y,type:y,vy:2})}d.splice(r,1),k+=10*c,N(k)}else s.color="#999";e.vy*=-1;break}}}for(let n=x.length-1;n>=0;n--){const e=x[n];if(e.y+=e.vy,e.y>a){x.splice(n,1);continue}if(e.y+15>=a-40-o.h&&e.x>o.x&&e.x<o.x+o.w){if(e.type==="multi"){const r=h[0]||{x:l/2,y:a-100,vx:3,vy:-4,r:8};h.push({...r,vx:r.vx+2},{...r,vx:r.vx-2})}else e.type==="wide"&&(o.w=Math.min(240,o.w+40));B(e.x,e.y,"#ffd740",6),x.splice(n,1)}}for(let n=u.length-1;n>=0;n--){const e=u[n];e.x+=e.vx,e.y+=e.vy,e.life-=.03,e.life<=0&&u.splice(n,1)}d.length===0&&(c++,H(c),o.w=j,G(),E())}function Q(){t.fillStyle="#0a0e1a",t.fillRect(0,0,l,a),t.strokeStyle="rgba(0,229,255,.04)";for(let e=0;e<l;e+=40)t.beginPath(),t.moveTo(e,0),t.lineTo(e,a),t.stroke();for(let e=0;e<a;e+=40)t.beginPath(),t.moveTo(0,e),t.lineTo(l,e),t.stroke();d.forEach(e=>{t.fillStyle=e.color,t.shadowColor=e.color,t.shadowBlur=6,t.beginPath(),t.roundRect(e.x,e.y,e.w,e.h,4),t.fill(),t.shadowBlur=0});const n=t.createLinearGradient(o.x,0,o.x+o.w,0);n.addColorStop(0,"#00e5ff"),n.addColorStop(1,"#00b0d0"),t.fillStyle=n,t.shadowColor="#00e5ff",t.shadowBlur=10,t.beginPath(),t.roundRect(o.x,a-40-o.h,o.w,o.h,7),t.fill(),t.shadowBlur=0,h.forEach(e=>{t.fillStyle="#fff",t.shadowColor="#fff",t.shadowBlur=12,t.beginPath(),t.arc(e.x,e.y,e.r,0,Math.PI*2),t.fill(),t.shadowBlur=0}),x.forEach(e=>{t.fillStyle=e.type==="multi"?"#ff5252":"#ffd740",t.font="18px sans-serif",t.fillText(e.type==="multi"?"âš¡":"â†”",e.x-8,e.y+8)}),u.forEach(e=>{const r=Math.round(e.life*255).toString(16).padStart(2,"0");t.fillStyle=e.color+r,t.beginPath(),t.arc(e.x,e.y,3*e.life,0,Math.PI*2),t.fill()})}function X(){w&&!m&&J(),Q(),W=requestAnimationFrame(X)}const q=n=>{o.x=n.clientX-o.w/2,o.x=Math.max(0,Math.min(l-o.w,o.x))},P=()=>{m||w||(w=!0,m=!1,L(),M("playing"))},D=n=>{n.code==="Space"&&(n.preventDefault(),P()),n.code==="ArrowLeft"&&(o.x=Math.max(0,o.x-30)),n.code==="ArrowRight"&&(o.x=Math.min(l-o.w,o.x+30))};return window.addEventListener("mousemove",q),window.addEventListener("keydown",D),f.addEventListener("click",P),I.current.restart=()=>{m=!1,w=!1,L(),M("menu")},L(),X(),()=>{cancelAnimationFrame(W),window.removeEventListener("mousemove",q),window.removeEventListener("keydown",D),window.removeEventListener("resize",S),f.removeEventListener("click",P)}},[]),i.jsxs("div",{className:"bo-root",children:[i.jsx("canvas",{ref:R,className:"bo-canvas"}),b==="menu"&&i.jsxs("div",{className:"bo-overlay",children:[i.jsx("h1",{children:"ðŸ§± Breakout"}),i.jsx("p",{children:"Mouse to move paddle"}),i.jsx("p",{children:"Click or SPACE to start"})]}),b==="playing"&&i.jsxs("div",{className:"bo-hud",children:[i.jsxs("span",{children:["Score: ",A]}),i.jsxs("span",{children:["Level: ",z]}),i.jsxs("span",{children:["â¤ï¸ ",K]})]}),b==="over"&&i.jsxs("div",{className:"bo-gameover",children:[i.jsx("h2",{children:"Game Over"}),i.jsxs("p",{children:["Score: ",A]}),i.jsxs("p",{children:["Level reached: ",z]}),i.jsx("button",{onClick:()=>{var f,t;return(t=(f=I.current).restart)==null?void 0:t.call(f)},children:"Restart"})]}),i.jsx(U,{})]})}export{Z as default};
