import{r,j as s}from"./index-CRqe24Pj.js";import{B as U}from"./BackButton-DJX8SMkP.js";const R=["rock","paper","scissors"],m={rock:"âœŠ",paper:"âœ‹",scissors:"âœŒï¸"},Y={rock:"scissors",paper:"rock",scissors:"paper"};function M(){const[e,c]=r.useState("idle"),[f,x]=r.useState(3),[t,j]=r.useState(null),[i,d]=r.useState(null),[a,v]=r.useState(""),[u,k]=r.useState({player:0,cpu:0,rounds:0}),[b,N]=r.useState(0),g=r.useRef(null),P=r.useRef(null),w=r.useRef(null),S=r.useRef(null);r.useEffect(()=>{if(e==="countdown"){let l=0;return S.current=setInterval(()=>{l++,N(l)},100),()=>clearInterval(S.current)}else N(0)},[e]);const I=r.useCallback(l=>{if(e!=="idle")return;j(l),c("countdown"),x(3),d(null),v("");let o=3;w.current=setInterval(()=>{if(o--,x(o),o<=0){clearInterval(w.current);const p=R[Math.floor(Math.random()*3)];d(p),c("reveal"),setTimeout(()=>{let n="";l===p?n="tie":Y[l]===p?n="win":n="lose",v(n),c("result"),k(h=>({player:h.player+(n==="win"?1:0),cpu:h.cpu+(n==="lose"?1:0),rounds:h.rounds+1})),setTimeout(()=>{c("idle"),j(null),d(null)},2e3)},600)}},800)},[e]),y=l=>e!=="countdown"?"":`translateY(${Math.sin(b*1.8)*20}px)`,C=()=>e==="reveal"?"reveal-bounce":"",T=a==="win"?"ðŸŽ‰ You Win!":a==="lose"?"ðŸ’€ You Lose!":a==="tie"?"ðŸ¤ Tie!":"",E=a==="win"?"win":a==="lose"?"lose":a==="tie"?"tie":"";return s.jsxs("div",{className:"rps-root",children:[s.jsx("h1",{className:"rps-title",children:"Rock Paper Scissors"}),s.jsxs("div",{className:"rps-scoreboard",children:[s.jsxs("div",{className:"rps-score you",children:["You: ",u.player]}),s.jsxs("div",{className:"rps-round",children:["Round ",u.rounds+1]}),s.jsxs("div",{className:"rps-score cpu",children:["CPU: ",u.cpu]})]}),s.jsxs("div",{className:"rps-arena",children:[s.jsxs("div",{className:"rps-fighter left",children:[s.jsx("div",{className:"fighter-label",children:"YOU"}),s.jsxs("div",{className:`fist-display ${C()}`,style:{transform:y()},ref:g,children:[e==="countdown"&&s.jsx("span",{className:"fist-icon",children:"âœŠ"}),(e==="reveal"||e==="result")&&t&&s.jsx("span",{className:"fist-icon choice-reveal",children:m[t]}),e==="idle"&&s.jsx("span",{className:"fist-icon waiting",children:"âœŠ"})]}),(e==="reveal"||e==="result")&&t&&s.jsx("div",{className:"choice-label",children:t.toUpperCase()})]}),s.jsxs("div",{className:"rps-center",children:[e==="countdown"&&s.jsx("div",{className:"countdown-display",children:s.jsx("span",{className:"countdown-number",children:f})},f),e==="reveal"&&s.jsx("div",{className:"vs-text",children:"VS"}),e==="result"&&s.jsx("div",{className:`result-display ${E}`,children:T}),e==="idle"&&s.jsx("div",{className:"vs-text idle-vs",children:"VS"})]}),s.jsxs("div",{className:"rps-fighter right",children:[s.jsx("div",{className:"fighter-label",children:"CPU"}),s.jsxs("div",{className:`fist-display ${C()}`,style:{transform:e==="countdown"?y():""},ref:P,children:[e==="countdown"&&s.jsx("span",{className:"fist-icon mirrored",children:"âœŠ"}),(e==="reveal"||e==="result")&&i&&s.jsx("span",{className:"fist-icon choice-reveal mirrored",children:m[i]}),e==="idle"&&s.jsx("span",{className:"fist-icon waiting mirrored",children:"âœŠ"})]}),(e==="reveal"||e==="result")&&i&&s.jsx("div",{className:"choice-label",children:i.toUpperCase()})]})]}),s.jsx("div",{className:`rps-choices ${e!=="idle"?"disabled":""}`,children:R.map(l=>s.jsxs("button",{className:"rps-choice-btn",onClick:()=>I(l),disabled:e!=="idle",children:[s.jsx("span",{className:"choice-emoji",children:m[l]}),s.jsx("span",{className:"choice-name",children:l})]},l))}),s.jsx("p",{className:"rps-hint",children:e==="idle"?"Pick your weapon!":e==="countdown"?"Shaking...":""}),s.jsx(U,{})]})}export{M as default};
