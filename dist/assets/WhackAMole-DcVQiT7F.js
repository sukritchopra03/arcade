import{r as t,j as e}from"./index-CRqe24Pj.js";import{B as k}from"./BackButton-DJX8SMkP.js";const o=9,v=30;function R(){const[h,i]=t.useState(Array(o).fill(!1)),[n,j]=t.useState(0),[N,x]=t.useState(v),[l,g]=t.useState(!1),[m,S]=t.useState(!1),[u,I]=t.useState(()=>parseInt(localStorage.getItem("wam-high")||"0")),[M,f]=t.useState(Array(o).fill(!1)),d=t.useRef(null),w=t.useRef(null),p=()=>{j(0),x(v),S(!1),g(!0),i(Array(o).fill(!1)),f(Array(o).fill(!1))},A=t.useCallback(r=>{!l||!h[r]||(j(s=>s+1),i(s=>{const a=[...s];return a[r]=!1,a}),f(s=>{const a=[...s];return a[r]=!0,a}),setTimeout(()=>f(s=>{const a=[...s];return a[r]=!1,a}),300))},[l,h]);return t.useEffect(()=>{if(l)return d.current=setInterval(()=>{x(r=>r<=1?(g(!1),S(!0),clearInterval(d.current),0):r-1)},1e3),()=>clearInterval(d.current)},[l]),t.useEffect(()=>{if(!l)return;const r=()=>{const s=Math.floor(Math.random()*o);i(a=>{const c=[...a];return c[s]=!0,c}),setTimeout(()=>{i(a=>{const c=[...a];return c[s]=!1,c})},800+Math.random()*600)};return w.current=setInterval(r,600+Math.random()*400),()=>clearInterval(w.current)},[l]),t.useEffect(()=>{m&&n>u&&(I(n),localStorage.setItem("wam-high",String(n)))},[m,n,u]),e.jsxs("div",{className:"wam-root",children:[e.jsx("h1",{children:"ğŸ”¨ Whack-a-Mole"}),e.jsxs("div",{className:"wam-hud",children:[e.jsxs("span",{children:["Score: ",e.jsx("strong",{children:n})]}),e.jsxs("span",{className:"wam-timer",children:["â± ",N,"s"]}),e.jsxs("span",{children:["Best: ",e.jsx("strong",{children:u})]})]}),!l&&!m&&e.jsx("button",{className:"wam-start",onClick:p,children:"Start Game"}),e.jsx("div",{className:"wam-grid",children:h.map((r,s)=>e.jsxs("div",{className:`wam-hole ${r?"mole-up":""} ${M[s]?"hit":""}`,onClick:()=>A(s),children:[e.jsx("div",{className:"wam-dirt"}),e.jsx("div",{className:"wam-mole",children:r?"ğŸ¹":""})]},s))}),m&&e.jsxs("div",{className:"wam-over",children:[e.jsx("h2",{children:"Time's Up!"}),e.jsxs("p",{children:["Score: ",n]}),n>=u&&n>0&&e.jsx("p",{className:"wam-new-high",children:"ğŸ† New High Score!"}),e.jsx("button",{onClick:p,children:"Play Again"})]}),e.jsx(k,{})]})}export{R as default};
