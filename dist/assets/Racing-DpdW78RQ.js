import{r as p,j as r,_ as re}from"./index-CRqe24Pj.js";import{B as se}from"./BackButton-DJX8SMkP.js";function ce(){const n=p.useRef(null),[F,B]=p.useState(0),[T,k]=p.useState(0),[z,L]=p.useState("menu"),[U,q]=p.useState(0),y=p.useRef({});return p.useEffect(()=>{let t,o,w,a,s,i=[],_=[],v=!1,S=!1,E=0,h=0,f=0;const G=6,M=G/3,c={left:!1,right:!1};let D;async function V(){t=await re(()=>import("./three.module-Ck8estzQ.js"),[],import.meta.url),o=new t.Scene,o.background=new t.Color(1710638),o.fog=new t.FogExp2(1710638,.012),w=new t.PerspectiveCamera(75,n.current.clientWidth/n.current.clientHeight,.1,1e3),w.position.set(0,3.5,6),w.lookAt(0,0,-10),a=new t.WebGLRenderer({antialias:!0,alpha:!1}),a.setSize(n.current.clientWidth,n.current.clientHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.shadowMap.enabled=!0,n.current.appendChild(a.domElement),o.add(new t.AmbientLight(6710954,.6));const e=new t.DirectionalLight(16777215,.9);e.position.set(10,20,10),e.castShadow=!0,o.add(e);const u=new t.PlaneGeometry(G,300),x=new t.MeshStandardMaterial({color:2236979}),m=new t.Mesh(u,x);m.rotation.x=-Math.PI/2,m.position.z=-150,m.receiveShadow=!0,o.add(m);for(let d=0;d<60;d++){const l=new t.PlaneGeometry(.15,2),b=new t.MeshBasicMaterial({color:16766784});[-M,M].forEach(ne=>{const j=new t.Mesh(l,b);j.rotation.x=-Math.PI/2,j.position.set(ne,.01,-d*5),o.add(j),_.push(j)})}const R=new t.BoxGeometry(.3,.5,300),P=new t.MeshStandardMaterial({color:58879,emissive:13124,emissiveIntensity:.5}),g=new t.MeshStandardMaterial({color:16732754,emissive:3342353,emissiveIntensity:.5}),W=new t.Mesh(R,P);W.position.set(-G/2-.2,.25,-150),o.add(W);const H=new t.Mesh(R,g);H.position.set(G/2+.2,.25,-150),o.add(H),s=new t.Group;const J=new t.BoxGeometry(1,.5,1.8),Q=new t.MeshStandardMaterial({color:16732754,metalness:.6,roughness:.3}),A=new t.Mesh(J,Q);A.position.y=.45,A.castShadow=!0,s.add(A);const Y=new t.BoxGeometry(.8,.35,.9),Z=new t.MeshStandardMaterial({color:13378082,metalness:.5,roughness:.3}),K=new t.Mesh(Y,Z);K.position.set(0,.85,-.1),s.add(K);const $=new t.SphereGeometry(.08,8,8),ee=new t.MeshBasicMaterial({color:16777130});[[-.35,.45,-.92],[.35,.45,-.92]].forEach(d=>{const l=new t.Mesh($,ee);l.position.set(...d),s.add(l);const b=new t.PointLight(16777130,.5,8);b.position.set(...d),s.add(b)});const te=new t.CylinderGeometry(.18,.18,.15,12),oe=new t.MeshStandardMaterial({color:1118481});[[-.5,.18,.6],[.5,.18,.6],[-.5,.18,-.6],[.5,.18,-.6]].forEach(d=>{const l=new t.Mesh(te,oe);l.rotation.z=Math.PI/2,l.position.set(...d),s.add(l)}),o.add(s);const O=()=>{n.current&&(w.aspect=n.current.clientWidth/n.current.clientHeight,w.updateProjectionMatrix(),a.setSize(n.current.clientWidth,n.current.clientHeight))};window.addEventListener("resize",O),y.current.cleanup=()=>{window.removeEventListener("resize",O),cancelAnimationFrame(D),a.dispose(),n.current&&a.domElement.parentNode===n.current&&n.current.removeChild(a.domElement)},N()}function X(){const e=t,x=[-M,0,M][Math.floor(Math.random()*3)],m=[58879,16766784,14696699,6942894],R=new e.BoxGeometry(.9,.8,1.5),P=new e.MeshStandardMaterial({color:m[Math.floor(Math.random()*m.length)],metalness:.3,roughness:.5}),g=new e.Mesh(R,P);g.position.set(x,.4,-60),g.castShadow=!0,i.push(g),o.add(g)}function N(){if(D=requestAnimationFrame(N),v&&!S){h=Math.min(.5,h+1e-4),E+=Math.floor(h*100),B(E),k(Math.floor(h*200)),_.forEach(e=>{e.position.z+=h,e.position.z>10&&(e.position.z-=300)});for(let e=i.length-1;e>=0;e--)i[e].position.z+=h,i[e].position.z>5&&(o.remove(i[e]),i.splice(e,1));Math.random()<.018&&X(),c.left&&f>-M&&(f-=.06),c.right&&f<M&&(f+=.06),s.position.x=f,s.rotation.y=c.left?.1:c.right?-.1:0;for(const e of i){const u=Math.abs(s.position.x-e.position.x),x=Math.abs(s.position.z-e.position.z);u<.85&&x<1.2&&(S=!0,v=!1,q(E),L("over"))}}a.render(o,w)}const C=e=>{(e.code==="Space"||e.code==="Enter")&&!v&&!S&&(v=!0,L("playing")),(e.code==="ArrowLeft"||e.code==="KeyA")&&(c.left=!0),(e.code==="ArrowRight"||e.code==="KeyD")&&(c.right=!0)},I=e=>{(e.code==="ArrowLeft"||e.code==="KeyA")&&(c.left=!1),(e.code==="ArrowRight"||e.code==="KeyD")&&(c.right=!1)};return window.addEventListener("keydown",C),window.addEventListener("keyup",I),y.current.restart=()=>{S=!1,v=!1,E=0,h=0,f=0,s.position.x=0,i.forEach(e=>o.remove(e)),i=[],B(0),k(0),L("menu")},V(),()=>{var e,u;window.removeEventListener("keydown",C),window.removeEventListener("keyup",I),(u=(e=y.current).cleanup)==null||u.call(e)}},[]),r.jsxs("div",{className:"racing-root",children:[r.jsx("div",{ref:n,className:"racing-container"}),z==="menu"&&r.jsxs("div",{className:"racing-overlay",children:[r.jsx("h1",{children:"ðŸŽï¸ 3D Racing"}),r.jsx("p",{children:"Use â† / â†’ or A/D to steer"}),r.jsx("p",{children:"Press SPACE to start"})]}),z==="playing"&&r.jsxs("div",{className:"racing-hud",children:[r.jsxs("div",{className:"rhud-item",children:["Score: ",F]}),r.jsxs("div",{className:"rhud-item speed",children:["Speed: ",T]})]}),z==="over"&&r.jsxs("div",{className:"racing-gameover",children:[r.jsx("h2",{children:"Game Over!"}),r.jsxs("p",{children:["Score: ",U]}),r.jsx("button",{onClick:()=>{var t,o;return(o=(t=y.current).restart)==null?void 0:o.call(t)},children:"Restart"})]}),r.jsx(se,{})]})}export{ce as default};
