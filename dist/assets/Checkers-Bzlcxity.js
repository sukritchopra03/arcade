import{r as x,j as r}from"./index-DxoVmnoF.js";import{B as z}from"./BackButton-rhTEpRQT.js";const S=0,y=1,I=2,A=3,T=4,B=s=>s===y||s===I,W=s=>s===A||s===T,D=s=>s===I||s===T;function $(){const s=Array(64).fill(S);for(let t=0;t<3;t++)for(let e=0;e<8;e++)(t+e)%2===1&&(s[t*8+e]=A);for(let t=5;t<8;t++)for(let e=0;e<8;e++)(t+e)%2===1&&(s[t*8+e]=y);return s}function C(s,t){const e=s[t];if(e===S)return[];const c=Math.floor(t/8),k=t%8,f=[],v=[],u=D(e)?[[-1,-1],[-1,1],[1,-1],[1,1]]:B(e)?[[-1,-1],[-1,1]]:[[1,-1],[1,1]],a=B(e)?W:B;for(const[d,p]of u){const o=c+d,h=k+p;if(o>=0&&o<8&&h>=0&&h<8){if(s[o*8+h]===S)f.push({from:t,to:o*8+h});else if(a(s[o*8+h])){const j=o+d,M=h+p;j>=0&&j<8&&M>=0&&M<8&&s[j*8+M]===S&&v.push({from:t,to:j*8+M,captured:o*8+h})}}}return v.length>0?v:f}function E(s,t){const e=t?B:W;let c=[],k=[];for(let f=0;f<64;f++){if(!e(s[f]))continue;C(s,f).forEach(u=>{u.captured?c.push(u):k.push(u)})}return c.length>0?c:k}function N(s,t){const e=[...s];e[t.to]=e[t.from],e[t.from]=S,t.captured!==void 0&&(e[t.captured]=S);const c=Math.floor(t.to/8);return e[t.to]===y&&c===0&&(e[t.to]=I),e[t.to]===A&&c===7&&(e[t.to]=T),e}function F(s){let t=0;for(let e=0;e<64;e++)s[e]===y&&(t+=3),s[e]===I&&(t+=7),s[e]===A&&(t-=3),s[e]===T&&(t-=7);return t}function P(s,t,e,c,k){if(t===0)return{score:F(s),move:null};const f=E(s,!k);if(f.length===0)return{score:k?-100:100,move:null};let v=null;if(k){let u=-1/0;for(const a of f){const d=N(s,a);let p=d;if(a.captured!==void 0){const h=C(d,a.to).filter(j=>j.captured!==void 0);h.length>0&&(p=N(d,h[0]))}const{score:o}=P(p,t-1,e,c,!1);if(o>u&&(u=o,v=a),e=Math.max(e,o),c<=e)break}return{score:u,move:v}}else{let u=1/0;for(const a of f){const d=N(s,a);let p=d;if(a.captured!==void 0){const h=C(d,a.to).filter(j=>j.captured!==void 0);h.length>0&&(p=N(d,h[0]))}const{score:o}=P(p,t-1,e,c,!0);if(o<u&&(u=o,v=a),c=Math.min(c,o),c<=e)break}return{score:u,move:v}}}function Q(){const[s,t]=x.useState($),[e,c]=x.useState(null),[k,f]=x.useState([]),[v,u]=x.useState("w"),[a,d]=x.useState(""),[p,o]=x.useState(!1),[h,j]=x.useState(12),[M,Y]=x.useState(12),q=l=>{let m=0,i=0;return l.forEach(n=>{B(n)&&m++,W(n)&&i++}),{w:m,b:i}},b=l=>{const{w:m,b:i}=q(l);return j(m),Y(i),i===0?(d("You win!"),!0):m===0?(d("AI wins!"),!0):!1},G=l=>{if(v!=="w"||p||a)return;const m=s[l];if(e!==null){const i=k.find(n=>n.to===l);if(i){let n=N(s,i);if(i.captured!==void 0){const g=C(n,i.to).filter(w=>w.captured!==void 0);if(g.length>0){t(n),c(i.to),f(g);return}}t(n),c(null),f([]),b(n)||(u("b"),setTimeout(()=>J(n),300));return}}if(B(m)){c(l);const i=E(s,!0);f(i.filter(n=>n.from===l))}else c(null),f([])},J=l=>{o(!0),setTimeout(()=>{if(E(l,!1).length===0){d("You win!"),o(!1);return}const{move:i}=P(l,4,-1/0,1/0,!1);if(!i){d("You win!"),o(!1);return}let n=N(l,i);if(i.captured!==void 0){let g=C(n,i.to).filter(w=>w.captured!==void 0);for(;g.length>0;)n=N(n,g[0]),g=C(n,g[0].to).filter(w=>w.captured!==void 0)}t(n),o(!1),b(n)||(E(n,!0).length===0?d("AI wins!"):u("w"))},50)},K=()=>{t($()),c(null),f([]),u("w"),d(""),o(!1),j(12),Y(12)},L=new Set(k.map(l=>l.to));return r.jsxs("div",{className:"ck-root",children:[r.jsxs("div",{className:"ck-side",children:[r.jsx("h1",{children:"⬛ Checkers"}),r.jsxs("div",{className:"ck-counts",children:[r.jsxs("span",{children:["You: ",h," pieces"]}),r.jsxs("span",{children:["AI: ",M," pieces"]})]}),p&&r.jsx("div",{className:"ck-think",children:"AI thinking…"}),a&&r.jsx("div",{className:"ck-status",children:a}),r.jsx("button",{className:"ck-reset",onClick:K,children:"New Game"})]}),r.jsx("div",{className:"ck-board",children:s.map((l,m)=>{const i=Math.floor(m/8),n=m%8,g=(i+n)%2===1,w=e===m,R=L.has(m);return r.jsxs("div",{className:`ck-sq ${g?"dark":"light"} ${w?"sel":""}`,onClick:()=>G(m),children:[R&&r.jsx("div",{className:"ck-dot"}),l===y&&r.jsx("div",{className:"ck-piece white"}),l===I&&r.jsx("div",{className:"ck-piece white king",children:"♛"}),l===A&&r.jsx("div",{className:"ck-piece black"}),l===T&&r.jsx("div",{className:"ck-piece black king",children:"♛"})]},m)})}),a&&r.jsxs("div",{className:"ck-overlay",children:[r.jsx("h2",{children:a}),r.jsx("button",{onClick:K,children:"Play Again"})]}),r.jsx(z,{})]})}export{Q as default};
