import{r as k,j as m}from"./index-CRqe24Pj.js";import{B as T}from"./BackButton-DJX8SMkP.js";const x=6,v=7,M=0,a=1,w=2;function d(){return Array.from({length:x},()=>Array(v).fill(M))}function A(s,o,e){for(let t=x-1;t>=0;t--)if(s[t][o]===M){const c=s.map(u=>[...u]);return c[t][o]=e,{board:c,row:t}}return null}function I(s,o){for(let e=0;e<x;e++)for(let t=0;t<v;t++){if(t+3<v&&s[e][t]===o&&s[e][t+1]===o&&s[e][t+2]===o&&s[e][t+3]===o)return[[e,t],[e,t+1],[e,t+2],[e,t+3]];if(e+3<x&&s[e][t]===o&&s[e+1][t]===o&&s[e+2][t]===o&&s[e+3][t]===o)return[[e,t],[e+1,t],[e+2,t],[e+3,t]];if(e+3<x&&t+3<v&&s[e][t]===o&&s[e+1][t+1]===o&&s[e+2][t+2]===o&&s[e+3][t+3]===o)return[[e,t],[e+1,t+1],[e+2,t+2],[e+3,t+3]];if(e+3<x&&t-3>=0&&s[e][t]===o&&s[e+1][t-1]===o&&s[e+2][t-2]===o&&s[e+3][t-3]===o)return[[e,t],[e+1,t-1],[e+2,t-2],[e+3,t-3]]}return null}function B(s){return s[0].every(o=>o!==M)}function F(s){const o=(e,t)=>{let c=0;for(let n=0;n<x;n++)s[n][3]===e&&(c+=3);const u=n=>{const r=n.filter(f=>f===e).length,h=n.filter(f=>f===M).length,l=n.filter(f=>f===t).length;return r===4?100:r===3&&h===1?5:r===2&&h===2?2:l===3&&h===1?-4:0};for(let n=0;n<x;n++)for(let r=0;r<=v-4;r++)c+=u([s[n][r],s[n][r+1],s[n][r+2],s[n][r+3]]);for(let n=0;n<=x-4;n++)for(let r=0;r<v;r++)c+=u([s[n][r],s[n+1][r],s[n+2][r],s[n+3][r]]);for(let n=0;n<=x-4;n++)for(let r=0;r<=v-4;r++)c+=u([s[n][r],s[n+1][r+1],s[n+2][r+2],s[n+3][r+3]]);for(let n=0;n<=x-4;n++)for(let r=3;r<v;r++)c+=u([s[n][r],s[n+1][r-1],s[n+2][r-2],s[n+3][r-3]]);return c};return o(w,a)-o(a,w)}function E(s,o,e,t,c){if(I(s,w))return{score:1e4,col:-1};if(I(s,a))return{score:-1e4,col:-1};if(B(s)||o===0)return{score:F(s),col:-1};const u=[];for(let n=0;n<v;n++)s[0][n]===M&&u.push(n);if(u.sort((n,r)=>Math.abs(n-3)-Math.abs(r-3)),c){let n=-1/0,r=u[0];for(const h of u){const l=A(s,h,w);if(!l)continue;const{score:f}=E(l.board,o-1,e,t,!1);if(f>n&&(n=f,r=h),e=Math.max(e,f),t<=e)break}return{score:n,col:r}}else{let n=1/0,r=u[0];for(const h of u){const l=A(s,h,a);if(!l)continue;const{score:f}=E(l.board,o-1,e,t,!0);if(f<n&&(n=f,r=h),t=Math.min(t,f),t<=e)break}return{score:n,col:r}}}function $(){const[s,o]=k.useState(d),[e,t]=k.useState(a),[c,u]=k.useState(null),[n,r]=k.useState("Your turn"),[h,l]=k.useState(!1),[f,S]=k.useState(-1),D=k.useCallback(()=>{o(d()),t(a),u(null),r("Your turn"),l(!1)},[]),W=N=>{if(e!==a||c||h)return;const i=A(s,N,a);if(!i)return;const C=I(i.board,a);if(C){o(i.board),u(C),r("ðŸŽ‰ You win!");return}if(B(i.board)){o(i.board),r("Draw!");return}o(i.board),t(w),r("AI thinkingâ€¦"),l(!0),setTimeout(()=>{const{col:j}=E(i.board,2,-1/0,1/0,!0),g=A(i.board,j,w);if(!g){l(!1);return}const Y=I(g.board,w);if(Y){o(g.board),u(Y),r("AI wins!"),l(!1);return}if(B(g.board)){o(g.board),r("Draw!"),l(!1);return}o(g.board),t(a),r("Your turn"),l(!1)},100)},P=(N,i)=>c&&c.some(([C,j])=>C===N&&j===i);return m.jsxs("div",{className:"c4-root",children:[m.jsx("h1",{children:"Connect Four"}),m.jsx("div",{className:"c4-status",children:n}),m.jsxs("div",{className:"c4-board",children:[m.jsx("div",{className:"c4-top-row",children:Array.from({length:v}).map((N,i)=>m.jsx("div",{className:"c4-top-cell",onMouseEnter:()=>S(i),onMouseLeave:()=>S(-1),onClick:()=>W(i),children:f===i&&e===a&&!c&&m.jsx("div",{className:"c4-preview"})},i))}),s.map((N,i)=>m.jsx("div",{className:"c4-row",children:N.map((C,j)=>m.jsx("div",{className:`c4-cell ${P(i,j)?"win":""}`,onClick:()=>W(j),onMouseEnter:()=>S(j),onMouseLeave:()=>S(-1),children:m.jsx("div",{className:`c4-disc ${C===a?"red":C===w?"yellow":""} ${C!==M?"drop":""}`})},j))},i))]}),(c||n==="Draw!")&&m.jsx("button",{className:"c4-reset",onClick:D,children:"Play Again"}),m.jsx(T,{})]})}export{$ as default};
