import{r as o,j as e}from"./index-CRqe24Pj.js";import{B as H}from"./BackButton-DJX8SMkP.js";const B=["â™ ","â™¥","â™¦","â™£"],I=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],F={"â™ ":"#e0e0e0","â™¥":"#ff5252","â™¦":"#ff5252","â™£":"#e0e0e0"};function Y(){const t=[];for(const a of B)for(const s of I)t.push({rank:s,suit:a,id:`${s}${a}`});for(let a=t.length-1;a>0;a--){const s=Math.floor(Math.random()*(a+1));[t[a],t[s]]=[t[s],t[a]]}return t}const S=t=>I.indexOf(t);function x(t){const a=[...t].sort((c,u)=>S(c.rank)-S(u.rank)),s=a.map(c=>S(c.rank)),i=a.map(c=>c.suit),h=i[0]===i[1]&&i[1]===i[2],p=s[2]-s[1]===1&&s[1]-s[0]===1||s[0]===0&&s[1]===1&&s[2]===12,d=s[0]===s[1]&&s[1]===s[2],m=s[0]===s[1]||s[1]===s[2]||s[0]===s[2];if(d)return{rank:6,high:s[0],name:"Trail (Three of a Kind)"};if(h&&p)return{rank:5,high:s[2],name:"Pure Sequence"};if(p)return{rank:4,high:s[2],name:"Sequence (Run)"};if(h)return{rank:3,high:s[2],name:"Flush (Color)"};if(m){const c=s[0]===s[1]?s[0]:s[1]===s[2]?s[1]:s[0];return{rank:2,high:c,kicker:s.find(u=>u!==c),name:"Pair"}}return{rank:1,high:s[2],name:"High Card"}}function q(t,a){const s=x(t),i=x(a);return s.rank!==i.rank?s.rank-i.rank:s.high!==i.high?s.high-i.high:s.kicker!==void 0&&i.kicker!==void 0?s.kicker-i.kicker:0}function $(){const[t,a]=o.useState("menu"),[s,i]=o.useState([]),[h,p]=o.useState([]),[d,m]=o.useState(0),[c,u]=o.useState(1e3),[R,f]=o.useState(1e3),[T,w]=o.useState(0),[j,N]=o.useState(""),[g,v]=o.useState(!1),[k]=o.useState(50),b=o.useCallback(()=>{const n=Y();i([n[0],n[1],n[2]]),p([n[3],n[4],n[5]]),m(0),v(!1),N(""),a("betting"),w(l=>l+1)},[]),C=n=>{if(c<n)return;const l=n;u(r=>r-n),f(r=>r-l),m(r=>r+n+l)},A=()=>{v(!0);const n=q(s,h);let l;n>0?(l="You Win!",u(r=>r+d)):n<0?(l="AI Wins!",f(r=>r+d)):(l="Tie!",u(r=>r+d/2),f(r=>r+d/2)),N(l),a("result")},y=()=>{v(!0),f(n=>n+d),N("You Folded â€” AI takes the pot"),a("result")},P=(n,l=!1)=>l?e.jsx("div",{className:"tp-card facedown",children:e.jsx("span",{children:"ðŸ‚ "})},n.id):e.jsxs("div",{className:"tp-card faceup",style:{color:F[n.suit]},children:[e.jsx("span",{className:"tp-rank",children:n.rank}),e.jsx("span",{className:"tp-suit",children:n.suit})]},n.id);return t==="menu"?e.jsxs("div",{className:"tp-menu",children:[e.jsx("h1",{children:"ðŸƒ Teen Patti"}),e.jsx("p",{children:"3 Patti â€” Indian Poker"}),e.jsx("p",{className:"tp-sub",children:"Get dealt 3 cards. Bet or fold against the AI!"}),e.jsx("button",{onClick:b,children:"Play"}),e.jsx(H,{})]}):e.jsxs("div",{className:"tp-root",children:[e.jsxs("div",{className:"tp-info",children:[e.jsxs("div",{className:"tp-chip-bar",children:[e.jsxs("span",{children:["You: ðŸ’°",c]}),e.jsxs("span",{className:"tp-pot",children:["Pot: ",d]}),e.jsxs("span",{children:["AI: ðŸ’°",R]})]}),e.jsxs("div",{className:"tp-round",children:["Round ",T]})]}),e.jsxs("div",{className:"tp-table",children:[e.jsx("div",{className:"tp-hand-label",children:"AI's Hand"}),e.jsx("div",{className:"tp-hand",children:h.map(n=>P(n,!g))}),e.jsx("div",{className:"tp-vs",children:"VS"}),e.jsx("div",{className:"tp-hand-label",children:"Your Hand"}),e.jsx("div",{className:"tp-hand",children:s.map(n=>P(n))}),s.length>0&&e.jsx("div",{className:"tp-hand-name",children:x(s).name})]}),t==="betting"&&e.jsxs("div",{className:"tp-actions",children:[e.jsxs("button",{onClick:()=>{C(k),A()},children:["Show (",k,")"]}),e.jsxs("button",{onClick:()=>{C(k*2),A()},children:["Raise & Show (",k*2,")"]}),e.jsx("button",{className:"tp-fold",onClick:y,children:"Fold"})]}),t==="result"&&e.jsxs("div",{className:"tp-result-area",children:[e.jsx("div",{className:`tp-result ${j.includes("Win")?"win":j.includes("Fold")?"fold":"lose"}`,children:j}),g&&h.length>0&&e.jsxs("div",{className:"tp-ai-rank",children:["AI had: ",x(h).name]}),e.jsx("button",{onClick:b,children:"Next Hand"})]}),e.jsx(H,{})]})}export{$ as default};
