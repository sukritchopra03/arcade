import{r as i,j as a}from"./index-CRqe24Pj.js";import{B as b}from"./BackButton-DJX8SMkP.js";const n=360,r=560,f=40,x=30,m=65,g=12,C=.35,I=-10;function A(y=r,c=12){const p=[];for(let l=0;l<c;l++)p.push({x:Math.random()*(n-m),y:y-l*(r/c)-40,type:Math.random()<.15?"moving":"static",dir:Math.random()<.5?1:-1});return p}function G(){const y=i.useRef(null),[c,p]=i.useState(0),[l,j]=i.useState(!1),[M,E]=i.useState(()=>parseInt(localStorage.getItem("dj-high")||"0")),h=i.useRef(null);i.useEffect(()=>{const v=y.current.getContext("2d"),s={px:n/2-f/2,py:r-100,vx:0,vy:0,platforms:A(),score:0,maxY:r-100,keys:{},gameOver:!1};h.current=s;const k=e=>{s.keys[e.key]=!0},w=e=>{s.keys[e.key]=!1};window.addEventListener("keydown",k),window.addEventListener("keyup",w);let u;const R=()=>{s.gameOver||P(s),O(v,s),u=requestAnimationFrame(R)};function P(e){if(e.keys.ArrowLeft||e.keys.a?e.vx=-5:e.keys.ArrowRight||e.keys.d?e.vx=5:e.vx*=.85,e.px+=e.vx,e.px>n&&(e.px=-f),e.px+f<0&&(e.px=n),e.vy+=C,e.py+=e.vy,e.vy>=0){for(const t of e.platforms)if(e.px+f>t.x&&e.px<t.x+m&&e.py+x>=t.y&&e.py+x<=t.y+g+8){e.vy=I;break}}if(e.py<r/2){const t=r/2-e.py;e.py=r/2;for(const o of e.platforms)o.y+=t;e.score+=Math.floor(t),p(e.score)}for(const t of e.platforms)t.type==="moving"&&(t.x+=t.dir*1.5,(t.x<=0||t.x+m>=n)&&(t.dir*=-1));for(e.platforms=e.platforms.filter(t=>t.y<r+20);e.platforms.length<10;){const t=Math.min(...e.platforms.map(o=>o.y));e.platforms.push({x:Math.random()*(n-m),y:t-40-Math.random()*60,type:Math.random()<.2?"moving":"static",dir:Math.random()<.5?1:-1})}e.py>r+50&&(e.gameOver=!0,j(!0),e.score>parseInt(localStorage.getItem("dj-high")||"0")&&(localStorage.setItem("dj-high",String(e.score)),E(e.score)))}function O(e,t){e.fillStyle="#0d1225",e.fillRect(0,0,n,r),e.fillStyle="#ffffff10";for(let o=0;o<40;o++)e.fillRect(o*97%n,(o*131+t.score*.05)%r,1.5,1.5);for(const o of t.platforms){const d=e.createLinearGradient(o.x,o.y,o.x,o.y+g);o.type==="moving"?(d.addColorStop(0,"#ce93d8"),d.addColorStop(1,"#ab47bc")):(d.addColorStop(0,"#69f0ae"),d.addColorStop(1,"#00c853")),e.fillStyle=d,e.beginPath(),e.roundRect(o.x,o.y,m,g,6),e.fill()}e.fillStyle="#ffd740",e.beginPath(),e.roundRect(t.px,t.py,f,x,8),e.fill(),e.fillStyle="#000",e.fillRect(t.px+10,t.py+8,5,6),e.fillRect(t.px+25,t.py+8,5,6),e.fillStyle="#ff5252",e.fillRect(t.px+14,t.py+20,12,3)}return u=requestAnimationFrame(R),()=>{cancelAnimationFrame(u),window.removeEventListener("keydown",k),window.removeEventListener("keyup",w)}},[]);const L=()=>{var v;const S={px:n/2-f/2,py:r-100,vx:0,vy:0,platforms:A(),score:0,maxY:r-100,keys:((v=h.current)==null?void 0:v.keys)||{},gameOver:!1};h.current=S,p(0),j(!1)};return i.useEffect(()=>{h.current},[l]),a.jsxs("div",{className:"dj-root",children:[a.jsxs("div",{className:"dj-hud",children:[a.jsxs("span",{children:["Score: ",a.jsx("strong",{children:c})]}),a.jsxs("span",{children:["Best: ",a.jsx("strong",{children:M})]})]}),a.jsx("canvas",{ref:y,width:n,height:r,className:"dj-canvas"}),l&&a.jsxs("div",{className:"dj-over",children:[a.jsx("h2",{children:"Game Over!"}),a.jsxs("p",{children:["Score: ",c]}),a.jsx("button",{onClick:L,children:"Play Again"})]}),a.jsx("p",{className:"dj-hint",children:"← → or A/D to move"}),a.jsx(b,{})]})}export{G as default};
