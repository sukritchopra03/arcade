import{r as u,j as n}from"./index-DxoVmnoF.js";import{B as C}from"./BackButton-rhTEpRQT.js";const E=["â™ ","â™¥","â™¦","â™£"],M=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],L={"â™ ":"#e0e0e0","â™¥":"#ff5252","â™¦":"#ff5252","â™£":"#e0e0e0"};function W(){const c=[];for(const t of E)for(const i of M)c.push({rank:i,suit:t,id:`${i}${t}`});for(let t=c.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[c[t],c[i]]=[c[i],c[t]]}return c}function K(c){const t={};c.forEach(d=>{t[d.rank]||(t[d.rank]=[]),t[d.rank].push(d)});const i=[],k=[];for(const d in t)t[d].length===4?i.push(d):k.push(...t[d]);return{books:i,remaining:k}}function D(){const[c,t]=u.useState("menu"),[i,k]=u.useState([]),[d,x]=u.useState([]),[P,A]=u.useState([]),[m,y]=u.useState([]),[g,B]=u.useState([]),[H,Y]=u.useState([]),[I,p]=u.useState("player"),[N,R]=u.useState(null),v=s=>Y(e=>[s,...e].slice(0,8)),F=u.useCallback(()=>{const s=W();k(s.slice(0,7)),x(s.slice(7,14)),A(s.slice(14)),y([]),B([]),Y([]),p("player"),R(null),t("playing")},[]),$=(s,e,o)=>{if(o.length===0)return{hand:s,pool:o};const l=[...o],a=l.pop();return{hand:[...s,a],pool:l}},b=(s,e)=>{const{books:o,remaining:l}=K(s);return{hand:l,books:[...e,...o]}},T=s=>{if(I!=="player"||!s)return;R(null);let e=[...i],o=[...d],l=[...P];const a=o.filter(r=>r.rank===s);if(a.length>0){v(`You asked for ${s}s â€” Got ${a.length}!`),e=[...e,...a],o=o.filter(f=>f.rank!==s);const r=b(e,m);e=r.hand,y(r.books),k(e),x(o),j(r.books,g,l)}else{v(`You asked for ${s}s â€” Go Fish!`);const r=$(e,k,l);e=r.hand,l=r.pool;const f=b(e,m);e=f.hand,y(f.books),k(e),A(l),j(f.books,g,l)||(p("ai"),setTimeout(()=>G(e,o,l,f.books,g),800))}},G=(s,e,o,l,a)=>{if(e.length===0&&o.length>0){const h=$(e,null,o);e=h.hand,o=h.pool}if(e.length===0){j(l,a,o),p("player");return}const r=e[Math.floor(Math.random()*e.length)].rank,f=s.filter(h=>h.rank===r);if(f.length>0){v(`AI asked for ${r}s â€” Got ${f.length} from you!`),e=[...e,...f],s=s.filter(S=>S.rank!==r);const h=b(e,a);e=h.hand,a=h.books,B(a),k(s),x(e),j(l,a,o)||setTimeout(()=>G(s,e,o,l,a),800)}else{v(`AI asked for ${r}s â€” Go Fish!`);const h=$(e,null,o);e=h.hand,o=h.pool;const S=b(e,a);e=S.hand,a=S.books,B(a),x(e),A(o),j(l,a,o)||p("player")}},j=(s,e,o)=>s.length+e.length===13||o.length===0?(t("result"),!0):!1,w=[...new Set(i.map(s=>s.rank))];if(c==="menu")return n.jsxs("div",{className:"gf-menu",children:[n.jsx("h1",{children:"ðŸŸ Go Fish"}),n.jsx("p",{children:"Collect all four of a rank to score a book!"}),n.jsx("button",{onClick:F,children:"Play"}),n.jsx(C,{})]});if(c==="result"){const s=m.length>g.length;return n.jsxs("div",{className:"gf-result",children:[n.jsx("h2",{children:s?"ðŸŽ‰ You Win!":"ðŸ˜ž AI Wins!"}),n.jsxs("p",{children:["Your books: ",m.length," Â |Â  AI books: ",g.length]}),n.jsx("button",{onClick:F,children:"Play Again"}),n.jsx(C,{})]})}return n.jsxs("div",{className:"gf-root",children:[n.jsxs("div",{className:"gf-info",children:[n.jsxs("span",{children:["Your Books: ",m.length]}),n.jsxs("span",{children:["Pool: ",P.length]}),n.jsxs("span",{children:["AI Books: ",g.length]})]}),n.jsxs("div",{className:"gf-ai",children:[n.jsxs("div",{className:"gf-label",children:["AI (",d.length," cards)"]}),n.jsx("div",{className:"gf-cards",children:d.map(s=>n.jsx("div",{className:"gf-card back",children:"ðŸ‚ "},s.id))})]}),n.jsxs("div",{className:"gf-books",children:[m.length>0&&n.jsxs("div",{className:"gf-book-row",children:["Your books: ",m.join(", ")]}),g.length>0&&n.jsxs("div",{className:"gf-book-row",children:["AI books: ",g.join(", ")]})]}),n.jsx("div",{className:"gf-log",children:H.map((s,e)=>n.jsx("div",{className:"gf-log-line",children:s},e))}),I==="player"&&n.jsxs("div",{className:"gf-ask",children:[n.jsx("div",{className:"gf-ask-label",children:"Ask AI for a rank:"}),n.jsx("div",{className:"gf-rank-btns",children:w.map(s=>n.jsx("button",{className:N===s?"sel":"",onClick:()=>R(s),children:s},s))}),N&&n.jsxs("button",{className:"gf-go",onClick:()=>T(N),children:["Ask for ",N,"s"]})]}),I==="ai"&&n.jsx("div",{className:"gf-thinking",children:"AI is thinkingâ€¦"}),n.jsxs("div",{className:"gf-player",children:[n.jsx("div",{className:"gf-label",children:"Your Hand"}),n.jsx("div",{className:"gf-cards",children:i.map(s=>n.jsxs("div",{className:"gf-card front",style:{color:L[s.suit]},children:[n.jsx("span",{className:"gf-r",children:s.rank}),n.jsx("span",{className:"gf-su",children:s.suit})]},s.id))})]}),n.jsx(C,{})]})}export{D as default};
