import{r as g,j as l}from"./index-DxoVmnoF.js";import{B as H}from"./BackButton-rhTEpRQT.js";function z(){const M=g.useRef(null),B=g.useRef(null),[L,D]=g.useState({player:0,computer:0}),[S,U]=g.useState(1),[W,b]=g.useState(0);return g.useEffect(()=>{const f=M.current,e=f.getContext("2d"),n=800,a=500;f.width=n,f.height=a;const y={ArrowUp:!1,ArrowDown:!1};let E,j=0,k=0,x=0;const t={w:12,h:90};let c=a/2-t.h/2,i=a/2-t.h/2,r=n/2,s=a/2,u=-5,p=-3,m=!1,d=[];const R=S;function C(o){r=n/2,s=a/2,u=o?-(4+R):4+R,p=Math.random()*4-2,x=0,b(0),d=[]}function N(o){m||(m=!0,o==="player"?j++:k++,D({player:j,computer:k}),u=0,p=0,setTimeout(()=>{C(o==="player"),m=!1},700))}function Y(){y.ArrowUp&&(c-=7),y.ArrowDown&&(c+=7),c=Math.max(0,Math.min(a-t.h,c));const w=2.5+R*1.2,h=i+t.h/2,v=s;h<v-8?i+=w:h>v+8&&(i-=w),i=Math.max(0,Math.min(a-t.h,i)),d.unshift({x:r,y:s}),d.length>12&&d.pop(),r+=u,s+=p,s<=6&&(s=6,p*=-1),s>=a-6&&(s=a-6,p*=-1),r<=t.w+10&&r>6&&s>=c&&s<=c+t.h&&(r=t.w+10,u=Math.abs(u)+.3,p=(s-c-t.h/2)/(t.h/2)*5,x++,b(x)),r>=n-t.w-10&&r<n-6&&s>=i&&s<=i+t.h&&(r=n-t.w-10,u=-(Math.abs(u)+.3),p=(s-i-t.h/2)/(t.h/2)*5,x++,b(x)),!m&&r<0&&N("computer"),!m&&r>n&&N("player")}function F(){e.fillStyle="#0a0e1a",e.fillRect(0,0,n,a),e.setLineDash([8,8]),e.strokeStyle="rgba(0,229,255,0.2)",e.lineWidth=2,e.beginPath(),e.moveTo(n/2,0),e.lineTo(n/2,a),e.stroke(),e.setLineDash([]);for(let h=0;h<d.length;h++){const v=d[h],P=.3*(1-h/d.length),G=6*(1-h/d.length*.5);e.beginPath(),e.arc(v.x,v.y,G,0,Math.PI*2),e.fillStyle=`rgba(0, 229, 255, ${P})`,e.fill()}e.beginPath(),e.arc(r,s,8,0,Math.PI*2),e.fillStyle="#fff",e.fill(),e.shadowColor="#00e5ff",e.shadowBlur=20,e.fill(),e.shadowBlur=0,e.shadowColor="#00e5ff",e.shadowBlur=15;const o=e.createLinearGradient(0,c,0,c+t.h);o.addColorStop(0,"#00e5ff"),o.addColorStop(1,"#0088aa"),e.fillStyle=o,e.fillRect(6,c,t.w,t.h),e.shadowColor="#ff5252",e.shadowBlur=15;const w=e.createLinearGradient(0,i,0,i+t.h);w.addColorStop(0,"#ff5252"),w.addColorStop(1,"#cc0000"),e.fillStyle=w,e.fillRect(n-t.w-6,i,t.w,t.h),e.shadowBlur=0,e.strokeStyle="rgba(0,229,255,0.15)",e.lineWidth=2,e.strokeRect(1,1,n-2,a-2)}function A(){m||Y(),F(),E=requestAnimationFrame(A)}const I=o=>{o.key in y&&(y[o.key]=!0,o.preventDefault())},T=o=>{o.key in y&&(y[o.key]=!1)};return window.addEventListener("keydown",I),window.addEventListener("keyup",T),C(!0),A(),B.current={reset:()=>{j=0,k=0,D({player:0,computer:0}),C(!0)}},()=>{cancelAnimationFrame(E),window.removeEventListener("keydown",I),window.removeEventListener("keyup",T)}},[S]),l.jsxs("div",{className:"pong-root",children:[l.jsxs("div",{className:"pong-hud",children:[l.jsx("div",{className:"pong-score cyan",children:L.player}),l.jsxs("div",{className:"pong-rally",children:["Rally: ",W]}),l.jsx("div",{className:"pong-score red",children:L.computer})]}),l.jsx("canvas",{ref:M,className:"pong-canvas"}),l.jsxs("div",{className:"pong-controls",children:[l.jsxs("label",{children:["Difficulty:",l.jsxs("select",{value:S,onChange:f=>U(Number(f.target.value)),children:[l.jsx("option",{value:1,children:"Easy"}),l.jsx("option",{value:2,children:"Medium"}),l.jsx("option",{value:3,children:"Hard"})]})]}),l.jsx("button",{onClick:()=>{var f;return(f=B.current)==null?void 0:f.reset()},children:"Reset"})]}),l.jsx(H,{})]})}export{z as default};
