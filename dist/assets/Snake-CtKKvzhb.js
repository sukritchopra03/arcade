import{r as c,j as s}from"./index-DxoVmnoF.js";import{B as W}from"./BackButton-rhTEpRQT.js";function G(){const M=c.useRef(null),v=c.useRef({running:!1}),[N,P]=c.useState(0),[F,A]=c.useState(!1),[H,C]=c.useState(()=>Number(localStorage.getItem("snakeHigh")||0)),[w,T]=c.useState(1);return c.useEffect(()=>{const l=M.current,t=l.getContext("2d"),h=440,f=440,a=22,u=h/a,y=f/a;l.width=h,l.height=f;let o,r,i,S,x,j,m;const g=[];function B(){o=[{x:10,y:10},{x:9,y:10},{x:8,y:10}],r={x:1,y:0},x=0,S=!0,m=w,P(0),A(!1),R(),j=0}function R(){let e;do e={x:Math.floor(Math.random()*u),y:Math.floor(Math.random()*y)};while(o.some(n=>n.x===e.x&&n.y===e.y));i=e}function O(e,n){for(let d=0;d<8;d++)g.push({x:e*a+a/2,y:n*a+a/2,vx:(Math.random()-.5)*4,vy:(Math.random()-.5)*4,life:1,hue:Math.random()*60+10})}function q(){const e={x:o[0].x+r.x,y:o[0].y+r.y};if(e.x=(e.x+u)%u,e.y=(e.y+y)%y,o.some(n=>n.x===e.x&&n.y===e.y)){S=!1,v.current.running=!1,A(!0);const n=Math.max(x,Number(localStorage.getItem("snakeHigh")||0));localStorage.setItem("snakeHigh",n),C(n);return}o.unshift(e),e.x===i.x&&e.y===i.y?(x++,P(x),O(i.x,i.y),R(),x%5===0&&(m=Math.min(m+.3,4))):o.pop()}function I(){t.fillStyle="#0a0e1a",t.fillRect(0,0,h,f),t.strokeStyle="rgba(255,255,255,0.03)",t.lineWidth=.5;for(let e=0;e<=u;e++)t.beginPath(),t.moveTo(e*a,0),t.lineTo(e*a,f),t.stroke();for(let e=0;e<=y;e++)t.beginPath(),t.moveTo(0,e*a),t.lineTo(h,e*a),t.stroke();t.shadowColor="#ff5252",t.shadowBlur=15,t.fillStyle="#ff5252",t.beginPath(),t.arc(i.x*a+a/2,i.y*a+a/2,a/2-2,0,Math.PI*2),t.fill(),t.shadowBlur=0,o.forEach((e,n)=>{const d=n===0,L=1-n/o.length*.5;if(d?(t.shadowColor="#69f0ae",t.shadowBlur=12,t.fillStyle="#69f0ae"):(t.shadowBlur=0,t.fillStyle=`rgba(105, 240, 174, ${L})`),t.fillRect(e.x*a+1,e.y*a+1,a-2,a-2),d){t.shadowBlur=0,t.fillStyle="#000";const k=r.x!==0?{x:r.x*4,y:-3}:{x:-3,y:r.y*4};t.beginPath(),t.arc(e.x*a+a/2+k.x,e.y*a+a/2+k.y,2,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(e.x*a+a/2+(r.x!==0?k.x:3),e.y*a+a/2+(r.y!==0?k.y:3),2,0,Math.PI*2),t.fill()}});for(let e=g.length-1;e>=0;e--){const n=g[e];if(n.x+=n.vx,n.y+=n.vy,n.life-=.03,n.life<=0){g.splice(e,1);continue}t.fillStyle=`hsla(${n.hue}, 80%, 60%, ${n.life})`,t.beginPath(),t.arc(n.x,n.y,3*n.life,0,Math.PI*2),t.fill()}t.strokeStyle="rgba(105,240,174,0.15)",t.lineWidth=2,t.strokeRect(0,0,h,f)}function b(e){if(!S){I();return}e-j>Math.max(50,130-m*15)&&(j=e,q()),I(),p=requestAnimationFrame(b)}let p;const E=e=>{e.key==="ArrowUp"&&r.y===0&&(r={x:0,y:-1}),e.key==="ArrowDown"&&r.y===0&&(r={x:0,y:1}),e.key==="ArrowLeft"&&r.x===0&&(r={x:-1,y:0}),e.key==="ArrowRight"&&r.x===0&&(r={x:1,y:0})};return window.addEventListener("keydown",E),B(),v.current={running:!0,restart:()=>{B(),p=requestAnimationFrame(b)}},p=requestAnimationFrame(b),()=>{cancelAnimationFrame(p),window.removeEventListener("keydown",E)}},[w]),s.jsxs("div",{className:"snake-root",children:[s.jsx("h1",{className:"snake-title",children:"Snake"}),s.jsxs("div",{className:"snake-hud",children:[s.jsxs("span",{className:"snake-score",children:["Score: ",N]}),s.jsxs("span",{className:"snake-high",children:["Best: ",H]})]}),s.jsx("canvas",{ref:M,className:"snake-canvas"}),F&&s.jsxs("div",{className:"snake-gameover",children:[s.jsx("h2",{children:"Game Over!"}),s.jsxs("p",{children:["Score: ",N]}),s.jsx("button",{onClick:()=>{var l,t;return(t=(l=v.current).restart)==null?void 0:t.call(l)},children:"Play Again"})]}),s.jsx("div",{className:"snake-controls",children:s.jsxs("label",{children:["Speed:",s.jsxs("select",{value:w,onChange:l=>T(Number(l.target.value)),children:[s.jsx("option",{value:1,children:"Normal"}),s.jsx("option",{value:2,children:"Fast"}),s.jsx("option",{value:3,children:"Extreme"})]})]})}),s.jsx(W,{})]})}export{G as default};
