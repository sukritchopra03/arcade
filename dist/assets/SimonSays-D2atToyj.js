import{r,j as e}from"./index-CRqe24Pj.js";import{B as I}from"./BackButton-DJX8SMkP.js";const w=["red","green","blue","yellow"],R={red:329.63,green:261.63,blue:392,yellow:440};function T(c,d=300){try{const t=new(window.AudioContext||window.webkitAudioContext),a=t.createOscillator(),l=t.createGain();a.connect(l),l.connect(t.destination),a.frequency.value=R[c],a.type="sine",l.gain.setValueAtTime(.15,t.currentTime),l.gain.exponentialRampToValueAtTime(.001,t.currentTime+d/1e3),a.start(t.currentTime),a.stop(t.currentTime+d/1e3)}catch{}}function O(){const[c,d]=r.useState([]),[t,a]=r.useState([]),[l,h]=r.useState(null),[o,m]=r.useState("idle"),[p,x]=r.useState(0),[S,b]=r.useState(()=>parseInt(localStorage.getItem("simon-high")||"0")),[A,N]=r.useState(600),j=r.useRef(!1),f=r.useCallback(s=>{const u=w[Math.floor(Math.random()*4)],i=[...s,u];d(i),a([]),m("showing"),j.current=!0;let n=0;const g=Math.max(250,600-s.length*20);N(g);const C=setInterval(()=>{n<i.length?(h(i[n]),T(i[n],g*.7),setTimeout(()=>h(null),g*.6),n++):(clearInterval(C),m("input"),j.current=!1)},g)},[]),v=()=>{x(0),d([]),a([]),m("idle"),f([])},y=s=>{if(o!=="input")return;h(s),T(s,200),setTimeout(()=>h(null),200);const u=[...t,s];a(u);const i=u.length-1;if(u[i]!==c[i]){m("gameover");const n=c.length-1;n>S&&(b(n),localStorage.setItem("simon-high",String(n)));return}if(u.length===c.length){const n=c.length;x(n),setTimeout(()=>f(c),800)}};return e.jsxs("div",{className:"ss-root",children:[e.jsx("h1",{children:"ðŸ”´ Simon Says"}),e.jsxs("div",{className:"ss-hud",children:[e.jsxs("span",{children:["Score: ",e.jsx("strong",{children:p})]}),e.jsxs("span",{children:["Best: ",e.jsx("strong",{children:S})]})]}),e.jsxs("div",{className:"ss-board",children:[w.map(s=>e.jsx("button",{className:`ss-btn ss-${s} ${l===s?"active":""}`,onClick:()=>y(s),disabled:o!=="input"},s)),e.jsxs("div",{className:"ss-center",children:[o==="idle"&&e.jsx("button",{className:"ss-start",onClick:v,children:"START"}),o==="showing"&&e.jsx("span",{className:"ss-label",children:"Watch..."}),o==="input"&&e.jsx("span",{className:"ss-label",children:"Your turn!"}),o==="gameover"&&e.jsx("span",{className:"ss-label fail",children:"Wrong!"})]})]}),o==="gameover"&&e.jsxs("div",{className:"ss-over",children:[e.jsxs("p",{children:["You reached round ",e.jsx("strong",{children:p+1})]}),e.jsx("button",{className:"ss-restart",onClick:v,children:"Try Again"})]}),e.jsx(I,{})]})}export{O as default};
