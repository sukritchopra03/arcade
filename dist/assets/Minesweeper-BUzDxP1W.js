import{r as i,j as n}from"./index-DxoVmnoF.js";import{B as D}from"./BackButton-rhTEpRQT.js";const N=[{label:"Easy",rows:9,cols:9,mines:10},{label:"Medium",rows:16,cols:16,mines:40},{label:"Hard",rows:16,cols:30,mines:99}];function G(m,x,b,w,v){const f=Array.from({length:m},()=>Array(x).fill(0));let u=0;for(;u<b;){const c=Math.floor(Math.random()*m),a=Math.floor(Math.random()*x);f[c][a]===-1||Math.abs(c-w)<=1&&Math.abs(a-v)<=1||(f[c][a]=-1,u++)}for(let c=0;c<m;c++)for(let a=0;a<x;a++){if(f[c][a]===-1)continue;let g=0;for(let h=-1;h<=1;h++)for(let p=-1;p<=1;p++){const y=c+h,j=a+p;y>=0&&y<m&&j>=0&&j<x&&f[y][j]===-1&&g++}f[c][a]=g}return f}function _(){const[m,x]=i.useState(0),[b,w]=i.useState(null),[v,f]=i.useState(null),[u,c]=i.useState(null),[a,g]=i.useState(!1),[h,p]=i.useState(!1),[y,j]=i.useState(!0),[M,S]=i.useState(0),d=i.useRef(null),o=N[m],A=i.useCallback(r=>{const e=N[r!==void 0?r:m];w(null),f(Array.from({length:e.rows},()=>Array(e.cols).fill(!1))),c(Array.from({length:e.rows},()=>Array(e.cols).fill(!1))),g(!1),p(!1),j(!0),S(0),d.current&&clearInterval(d.current)},[m]);i.useEffect(()=>{A()},[]),i.useEffect(()=>()=>{d.current&&clearInterval(d.current)},[]);const I=(r,e,s,t)=>{if(!(s<0||s>=o.rows||t<0||t>=o.cols||e[s][t])&&(e[s][t]=!0,r[s][t]===0))for(let l=-1;l<=1;l++)for(let C=-1;C<=1;C++)I(r,e,s+l,t+C)},R=(r,e)=>{for(let s=0;s<o.rows;s++)for(let t=0;t<o.cols;t++)if(!r[s][t]&&e[s][t]!==-1)return!1;return!0},B=(r,e)=>{if(a||h||u&&u[r][e])return;let s=b;if(y&&(s=G(o.rows,o.cols,o.mines,r,e),w(s),j(!1),d.current=setInterval(()=>S(l=>l+1),1e3)),!s)return;if(s[r][e]===-1){const l=Array.from({length:o.rows},()=>Array(o.cols).fill(!0));f(l),g(!0),d.current&&clearInterval(d.current);return}const t=v.map(l=>[...l]);I(s,t,r,e),f(t),R(t,s)&&(p(!0),d.current&&clearInterval(d.current))},E=(r,e,s)=>{if(r.preventDefault(),a||h||!v||v[e][s])return;const t=u.map(l=>[...l]);t[e][s]=!t[e][s],c(t)},F=o.mines-(u?u.flat().filter(Boolean).length:0),O=["","#42a5f5","#66bb6a","#ff5252","#7e57c2","#ff9800","#00bcd4","#333","#999"];return n.jsxs("div",{className:"ms-root",children:[n.jsxs("div",{className:"ms-top",children:[n.jsx("div",{className:"ms-diffs",children:N.map((r,e)=>n.jsx("button",{className:e===m?"active":"",onClick:()=>{x(e),A(e)},children:r.label},r.label))}),n.jsxs("div",{className:"ms-info",children:[n.jsxs("span",{children:["ðŸ’£ ",F]}),n.jsx("button",{className:"ms-restart",onClick:()=>A(),children:"ðŸ˜Š New"}),n.jsxs("span",{children:["â± ",M,"s"]})]})]}),n.jsx("div",{className:"ms-board",style:{gridTemplateColumns:`repeat(${o.cols}, 1fr)`},children:Array.from({length:o.rows}).map((r,e)=>Array.from({length:o.cols}).map((s,t)=>{const l=v&&v[e][t],C=u&&u[e][t],k=b?b[e][t]:0;return n.jsxs("div",{className:`ms-cell ${l?"revealed":"hidden"} ${l&&k===-1?"mine":""}`,onClick:()=>B(e,t),onContextMenu:$=>E($,e,t),children:[C&&!l&&"ðŸš©",l&&k===-1&&"ðŸ’£",l&&k>0&&n.jsx("span",{style:{color:O[k]},children:k})]},`${e}-${t}`)}))}),(a||h)&&n.jsxs("div",{className:"ms-overlay",children:[n.jsx("h2",{children:h?"ðŸŽ‰ You Win!":"ðŸ’¥ Game Over!"}),n.jsxs("p",{children:["Time: ",M,"s"]}),n.jsx("button",{onClick:()=>A(),children:"Play Again"})]}),n.jsx(D,{})]})}export{_ as default};
